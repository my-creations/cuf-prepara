<!doctype html>
<html lang="pt">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Guia de Preparacao para Colonoscopia | CUF Prepara</title>
    <meta
      name="description"
      content="Guia de preparacao para colonoscopia: dieta por fases, medicacao, calendario e checklist."
    />
    <link rel="stylesheet" href="css/reset.css" />
    <link rel="stylesheet" href="css/variables.css" />
    <link rel="stylesheet" href="css/layout.css" />
    <link rel="stylesheet" href="css/components.css" />
    <link rel="stylesheet" href="css/sections.css" />
    <link rel="stylesheet" href="css/wizard.css" />
  </head>
  <body>
    <div class="page">
      <header class="site-header">
        <div class="logo">
          <span class="logo-mark"></span>
          <div class="logo-text">
            <span class="logo-title">CUF Prepara</span>
          </div>
        </div>
        <nav class="site-nav">
          <a href="#dieta-residuos" data-i18n="nav.residue">Dieta pobre em resíduos</a>
          <a href="#dieta-liquida" data-i18n="nav.liquid">Dieta líquida</a>
          <a href="#plenvu" data-i18n="nav.plenvu">Toma do Plenvu</a>
          <a href="#dia-exame" data-i18n="nav.examDay">Dia do exame</a>
          <a href="#faq" data-i18n="nav.faq">FAQ</a>
        </nav>
        <div class="lang-toggle" aria-label="Language" data-i18n-aria="lang.label">
          <button class="lang-btn is-active" data-lang="pt">PT</button>
          <button class="lang-btn" data-lang="en">EN</button>
        </div>
      </header>

      <main>
        <section class="hero" id="top">
          <div class="hero-content">
            <h1 data-i18n="hero.title">Guia de preparacao para colonoscopia</h1>
            <p class="hero-subtitle" data-i18n="hero.subtitle">
              Tudo o que precisa para uma preparacao intestinal eficaz, com calendario inteligente,
              dieta por fases e lembretes.
            </p>
          </div>
          <div class="hero-media">
            <div class="hero-card">
              <div class="hero-card-top">
                <span data-i18n="hero.cardTitle">Plano personalizado</span>
                <span class="pill" data-i18n="hero.cardPill">Lisboa</span>
              </div>
              <div class="hero-card-body">
                <div class="hero-card-row">
                  <span data-i18n="hero.cardDiet">Início da dieta</span>
                  <strong id="heroDietDate">--</strong>
                </div>
                <div class="hero-card-row dulcolax-row" id="heroDulcolaxRow48">
                  <span id="heroDulcolaxLabel48">Dulcolax</span>
                  <strong id="heroDulcolaxValue48">--</strong>
                </div>
                <div class="hero-card-row dulcolax-row" id="heroDulcolaxRow24">
                  <span id="heroDulcolaxLabel24">Dulcolax</span>
                  <strong id="heroDulcolaxValue24">--</strong>
                </div>
                <div class="hero-card-row">
                  <span data-i18n="hero.cardMeds">Toma do</span>
                  <strong id="heroMedsDate">--</strong>
                </div>
                <div class="hero-card-row">
                  <span data-i18n="hero.cardExam">Exame</span>
                  <strong id="heroExamDate">--</strong>
                </div>
              </div>
              <div class="hero-card-footer">
              </div>
              <div class="hero-card-actions calendar-actions">
                <button class="btn primary" id="toggleGoogle" data-i18n="calendar.googleBtn">
                  Adicionar ao Google Calendar
                </button>
                <button class="btn primary" id="downloadIcs" data-i18n="calendar.appleBtn">
                  Adicionar ao Apple Calendar
                </button>
              </div>
              <div class="google-events" id="googleEvents"></div>
            </div>
          </div>
        </section>

        <section class="section" id="preparacao">
          <div class="section-header">
            <div>
              <span class="section-kicker" data-i18n="accordion.kicker"></span>
              <h2>
                <span class="title-primary" data-i18n="accordion.titleLead">Preparação</span>
                <span class="title-accent" data-i18n="accordion.titleAccent">Detalhada</span>
              </h2>
              <p data-i18n="accordion.subtitle">
                Tudo o que precisa para preparar a dieta, a medicação e o dia do exame.
              </p>
            </div>
          </div>
          <div class="accordion" id="prepAccordion">
            <details class="accordion-item" id="dieta-residuos">
              <summary>
                <div class="accordion-summary">
                  <span class="accordion-title" data-i18n="accordion.sections.residue.title">
                    Dieta pobre em resíduos
                  </span>
                  <span class="accordion-meta" id="accordionMetaResidue"></span>
                </div>
              </summary>
              <div class="accordion-panel">
                <p class="accordion-intro" id="residueIntro"></p>
                <div class="accordion-grid">
                  <div class="accordion-block">
                    <h3 data-i18n="accordion.blocks.forbiddenTitle"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#ef4444" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin-right: 8px; vertical-align: middle;"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>Alimentos proibidos</h3>
                    <div class="food-grid" id="residueForbidden"></div>
                  </div>
                  <div class="accordion-block">
                    <h3 data-i18n="accordion.blocks.allowedTitle"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#22c55e" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin-right: 8px; vertical-align: middle;"><polyline points="20 6 9 17 4 12"></polyline></svg>Alimentos permitidos</h3>
                    <div class="food-grid" id="residueAllowed"></div>
                  </div>
                  <div class="accordion-block">
                    <h3 data-i18n="accordion.blocks.shoppingTitle">Lista de compras</h3>
                    <p class="accordion-note" id="residueShoppingNote"></p>
                    <div class="phase-focus" id="residueFocus"></div>
                    <div class="checklist" id="shoppingListResidue"></div>
                  </div>
                  <div class="accordion-block">
                    <h3 data-i18n="accordion.blocks.recipesTitle">Receitas</h3>
                    <div class="card-grid recipes" id="recipeCardsResidue"></div>
                  </div>
                  <div class="accordion-block full">
                    <div class="info-card dulcolax-reminder is-hidden" id="residueDulcolaxReminder"></div>
                  </div>
                </div>
              </div>
            </details>

            <details class="accordion-item" id="dieta-liquida">
              <summary>
                <div class="accordion-summary">
                  <span class="accordion-title" data-i18n="accordion.sections.liquid.title">
                    Dieta líquida
                  </span>
                  <span class="accordion-meta" id="accordionMetaLiquid"></span>
                </div>
              </summary>
              <div class="accordion-panel">
                <p class="accordion-intro" id="liquidIntro"></p>
                <div class="accordion-grid">
                  <div class="accordion-block">
                    <h3 data-i18n="accordion.blocks.forbiddenTitle"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#ef4444" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin-right: 8px; vertical-align: middle;"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>Alimentos proibidos</h3>
                    <div class="food-grid" id="liquidForbidden"></div>
                  </div>
                  <div class="accordion-block">
                    <h3 data-i18n="accordion.blocks.allowedTitle"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#22c55e" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin-right: 8px; vertical-align: middle;"><polyline points="20 6 9 17 4 12"></polyline></svg>Alimentos permitidos</h3>
                    <div class="food-grid" id="liquidAllowed"></div>
                  </div>
                  <div class="accordion-block">
                    <h3 data-i18n="accordion.blocks.shoppingTitle">Lista de compras</h3>
                    <p class="accordion-note" id="liquidShoppingNote"></p>
                    <div class="phase-focus" id="liquidFocus"></div>
                    <div class="checklist" id="shoppingListLiquid"></div>
                  </div>
                  <div class="accordion-block">
                    <h3 data-i18n="accordion.blocks.recipesTitle">Receitas</h3>
                    <div class="card-grid recipes" id="recipeCardsLiquid"></div>
                  </div>
                  <div class="accordion-block full">
                    <div class="info-card dulcolax-reminder is-hidden" id="liquidDulcolaxReminder"></div>
                  </div>
                </div>
              </div>
            </details>

            <details class="accordion-item" id="plenvu">
              <summary>
                <div class="accordion-summary">
                  <span class="accordion-title" data-i18n="accordion.sections.plenvu.title">
                    Toma do Plenvu
                  </span>
                  <span class="accordion-meta" id="accordionMetaPlenvu"></span>
                </div>
              </summary>
              <div class="accordion-panel">
                <div class="accordion-grid">
                  <div class="accordion-block full">
                    <h3 data-i18n="accordion.blocks.plenvuTextTitle">Explicação por escrito</h3>
                    <div class="info-card" id="plenvuText"></div>
                  </div>
                  <div class="accordion-block">
                    <h3 data-i18n="accordion.blocks.videoTitle">Vídeo de preparação do preparado</h3>
                    <div class="media-grid" id="plenvuVideoGrid"></div>
                  </div>
                </div>
              </div>
            </details>

            <details class="accordion-item" id="dia-exame">
              <summary>
                <div class="accordion-summary">
                  <span class="accordion-title" data-i18n="accordion.sections.examDay.title">
                    Dia do exame
                  </span>
                  <span class="accordion-meta" id="accordionMetaExam"></span>
                </div>
              </summary>
              <div class="accordion-panel">
                <div class="accordion-grid">
                  <div class="accordion-block full">
                    <h3 data-i18n="accordion.blocks.examLocationTitle">Dirija-se ao</h3>
                    <div class="info-card" id="examLocation"></div>
                  </div>
                  <div class="accordion-block full">
                    <h3 data-i18n="accordion.blocks.examChecklistTitle">A não esquecer</h3>
                    <div class="info-card" id="examChecklist"></div>
                  </div>
                </div>
              </div>
            </details>

            <details class="accordion-item" id="faq">
              <summary>
                <div class="accordion-summary">
                  <span class="accordion-title" data-i18n="accordion.sections.faq.title">
                    Perguntas frequentes
                  </span>
                  <span class="accordion-meta" data-i18n="accordion.sections.faq.meta">
                    Respostas rápidas
                  </span>
                </div>
              </summary>
              <div class="accordion-panel">
                <div class="faq" id="faqList"></div>
              </div>
            </details>
          </div>
        </section>

        <section class="section" id="alertas">
          <div class="callout">
            <div class="callout-content">
              <span class="callout-title" data-i18n="alerts.title">
                Precisa de ajuda durante a preparação?
              </span>
              <p data-i18n="alerts.text">
                Se tiver dúvidas, sintomas inesperados ou dificuldades com a preparação, contacte
                a equipa clínica do Hospital CUF Descobertas.
              </p>
            </div>
            <div class="callout-actions">
              <a class="btn primary" href="#" data-i18n="alerts.cta">Contactar equipa</a>
              <span class="callout-note" data-i18n="alerts.note">
                Este guia não substitui a orientação médica individual.
              </span>
            </div>
          </div>
        </section>
      </main>

      <footer class="site-footer">
        <div class="footer-content">
          <span data-i18n="footer.disclaimer">
            Informação de apoio à preparação para colonoscopia. Siga sempre a prescrição médica e
            as indicações do Hospital CUF Descobertas
          </span>
          <div class="footer-actions">
            <button type="button" class="btn subtle" id="resetWizard" style="font-size: 0.85rem; padding: 8px 16px;">
              Refazer configuração
            </button>
            <span class="footer-meta" data-i18n="footer.location">
              Hospital CUF Descobertas, Lisboa
            </span>
          </div>
        </div>
      </footer>
    </div>

    <div class="modal" id="videoModal" aria-hidden="true">
      <div class="modal-overlay" data-modal-close></div>
      <div class="modal-content" role="dialog" aria-modal="true">
        <button
          class="modal-close"
          data-modal-close
          aria-label="Fechar"
          data-i18n-aria="modal.close"
        >
          &times;
        </button>
        <div class="modal-body" id="modalBody"></div>
      </div>
    </div>

    <!-- Wizard Overlay -->
    <div id="wizardOverlay" class="wizard-overlay is-hidden">
      <!-- Splash Screen -->
      <div id="wizardSplash" class="wizard-splash is-hidden">
        <div class="wizard-splash-content">
          <h1 class="wizard-splash-logo">CUF Prepara</h1>
        </div>
      </div>

      <!-- Wizard Container -->
      <div id="wizardContainer" class="wizard-container is-hidden">
        <div class="wizard-card">
          <!-- Progress -->
          <div class="wizard-progress">
            <div class="wizard-progress-dot is-active"></div>
            <div class="wizard-progress-dot"></div>
            <div class="wizard-progress-dot"></div>
            <div class="wizard-progress-dot"></div>
          </div>

          <!-- Step 1: Language -->
          <div class="wizard-step" data-step="0">
            <h2 class="wizard-step-title">Escolha o idioma</h2>
            <p class="wizard-step-subtitle">Choose your language</p>
            <div class="wizard-options">
              <div class="wizard-option" data-wizard-lang="pt">
                <div class="wizard-option-radio"></div>
                <div class="wizard-option-content">
                  <h3 class="wizard-option-title">Português</h3>
                  <p class="wizard-option-description">Conteúdo em português</p>
                </div>
              </div>
              <div class="wizard-option" data-wizard-lang="en">
                <div class="wizard-option-radio"></div>
                <div class="wizard-option-content">
                  <h3 class="wizard-option-title">English</h3>
                  <p class="wizard-option-description">Content in English</p>
                </div>
              </div>
            </div>
          </div>

          <!-- Step 2: Date & Time -->
          <div class="wizard-step" data-step="1">
            <h2 class="wizard-step-title">Data e hora do exame</h2>
            <p class="wizard-step-subtitle">Selecione quando será realizada a colonoscopia</p>
            <div class="wizard-input-group">
              <div class="wizard-input-field">
                <label for="wizardDate">Data do exame</label>
                <div class="wizard-input-wrapper">
                  <svg class="wizard-input-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                    <line x1="16" y1="2" x2="16" y2="6"></line>
                    <line x1="8" y1="2" x2="8" y2="6"></line>
                    <line x1="3" y1="10" x2="21" y2="10"></line>
                  </svg>
                  <input type="date" id="wizardDate" lang="pt-PT" required />
                </div>
              </div>
              <div class="wizard-input-field">
                <label for="wizardTime">Hora do exame</label>
                <div class="wizard-input-wrapper">
                  <svg class="wizard-input-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <circle cx="12" cy="12" r="10"></circle>
                    <polyline points="12 6 12 12 16 14"></polyline>
                  </svg>
                  <input type="time" id="wizardTime" value="08:30" required />
                </div>
              </div>
            </div>
          </div>

          <!-- Step 3: Medication -->
          <div class="wizard-step" data-step="2">
            <h2 class="wizard-step-title">Medicação de preparação</h2>
            <p class="wizard-step-subtitle">Qual foi prescrito pelo seu médico?</p>
            <div class="wizard-options">
              <div class="wizard-option" data-wizard-medication="plenvu">
                <div class="wizard-option-radio"></div>
                <div class="wizard-option-content">
                  <h3 class="wizard-option-title">Plenvu</h3>
                  <p class="wizard-option-description">Solução de preparação intestinal</p>
                </div>
              </div>
              <div class="wizard-option" data-wizard-medication="moviprep">
                <div class="wizard-option-radio"></div>
                <div class="wizard-option-content">
                  <h3 class="wizard-option-title">Moviprep</h3>
                  <p class="wizard-option-description">Solução de preparação intestinal</p>
                </div>
              </div>
              <div class="wizard-option" data-wizard-medication="citrafleet">
                <div class="wizard-option-radio"></div>
                <div class="wizard-option-content">
                  <h3 class="wizard-option-title">Citrafleet</h3>
                  <p class="wizard-option-description">Com Dulcolax (prescrito pelo médico)</p>
                </div>
              </div>
            </div>
          </div>

          <!-- Step 4: Constipation -->
          <div class="wizard-step" data-step="3">
            <h2 class="wizard-step-title">Tem tendência para obstipação?</h2>
            <p class="wizard-step-subtitle">Evacua com dificuldade ou irregularidade?</p>
            <div class="wizard-options">
              <div class="wizard-option" data-wizard-constipation="true">
                <div class="wizard-option-radio"></div>
                <div class="wizard-option-content">
                  <h3 class="wizard-option-title">Sim</h3>
                  <p class="wizard-option-description">Tenho tendência para obstipação</p>
                </div>
              </div>
              <div class="wizard-option" data-wizard-constipation="false">
                <div class="wizard-option-radio"></div>
                <div class="wizard-option-content">
                  <h3 class="wizard-option-title">Não</h3>
                  <p class="wizard-option-description">Não tenho problemas de obstipação</p>
                </div>
              </div>
            </div>
            <div class="wizard-alert" id="constipationAlert" style="display: none;">
              <p class="wizard-alert-text">Será adicionado Dulcolax aos 48h e 24h antes do exame para melhor preparação intestinal.</p>
            </div>
          </div>

          <!-- Navigation -->
          <div class="wizard-buttons">
            <button type="button" class="wizard-btn wizard-btn-secondary" id="wizardBack" style="display: none;">Voltar</button>
            <button type="button" class="wizard-btn wizard-btn-primary" id="wizardNext" disabled>Continuar</button>
          </div>
        </div>
      </div>
    </div>

    <script type="module" src="js/main.js"></script>
  </body>
</html>
